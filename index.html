<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The Loop Clothing Exchange – 2025 Data Visualization</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Open Graph / social sharing (optional but nice) -->
  <meta property="og:title" content="The Loop Clothing Exchange – Sustainability Dashboard" />
  <meta property="og:description" content="Data visualizations of GW's Loop Clothing Exchange usage in 2025: what students take, when they visit, and how they donate." />

  <!-- Google Font (open source-ish) -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <!-- Vega + Vega-Lite + Vega-Embed (all open source) -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    :root {
      --bg: #0f172a;          /* deep navy */
      --bg-alt: #0b1220;
      --card: #111827;        /* slightly lighter */
      --accent: #22c55e;      /* green */
      --accent-soft: #4ade80;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border: #1f2937;
      --font-sans: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: var(--font-sans);
      background: radial-gradient(circle at top left, #1d283a 0, var(--bg) 40%, #020617 100%);
      color: var(--text);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
    }

    main {
      max-width: 1100px;
      margin: 0 auto;
      padding: 1.5rem 1rem 3rem;
    }

    @media (min-width: 768px) {
      main {
        padding: 2.5rem 1.5rem 4rem;
      }
    }

    header {
      margin-bottom: 2rem;
      padding: 1.5rem;
      border-radius: 1.25rem;
      background: linear-gradient(135deg, rgba(34, 197, 94, 0.12), rgba(56, 189, 248, 0.08));
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 18px 45px rgba(15, 23, 42, 0.7);
    }

    .eyebrow {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      padding: 0.25rem 0.75rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.7);
      border: 1px solid rgba(148, 163, 184, 0.5);
      font-size: 0.75rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.75rem;
    }

    .eyebrow-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.4);
    }

    h1 {
      font-size: clamp(1.9rem, 2.8vw + 1.2rem, 2.6rem);
      margin: 0 0 0.5rem;
      letter-spacing: -0.03em;
    }

    .subtitle {
      max-width: 52rem;
      font-size: 0.95rem;
      color: var(--muted);
    }

    .subtitle strong {
      color: var(--accent-soft);
      font-weight: 600;
    }

    .highlight-stat-row {
      display: flex;
      flex-wrap: wrap;
      gap: 1.25rem;
      margin-top: 1.25rem;
    }

    .stat-card {
      flex: 1 1 140px;
      min-width: 130px;
      padding: 0.85rem 1rem;
      border-radius: 0.9rem;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.7);
      box-shadow: 0 8px 25px rgba(15, 23, 42, 0.8);
    }

    .stat-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.11em;
      color: var(--muted);
      margin-bottom: 0.2rem;
    }

    .stat-value {
      font-size: 1.1rem;
      font-weight: 600;
      color: var(--accent-soft);
    }

    .stat-sub {
      margin-top: 0.1rem;
      font-size: 0.8rem;
      color: var(--muted);
    }

    section {
      margin-top: 2rem;
    }

    .section-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 1rem;
      margin-bottom: 0.5rem;
    }

    .section-title {
      font-size: 1.1rem;
      font-weight: 600;
    }

    .section-kicker {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      color: var(--muted);
    }

    .section-description {
      font-size: 0.9rem;
      color: var(--muted);
      max-width: 46rem;
      margin-bottom: 0.8rem;
    }

    .chart-card {
      margin-top: 0.5rem;
      padding: 1rem;
      border-radius: 1.1rem;
      background: radial-gradient(circle at top, rgba(15, 23, 42, 0.7) 0, var(--card) 60%);
      border: 1px solid var(--border);
      box-shadow:
        0 18px 45px rgba(15, 23, 42, 0.9),
        0 0 0 1px rgba(15, 23, 42, 0.7) inset;
    }

    figure {
      margin: 0;
    }

    figcaption {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.5rem;
    }

    .chart-container {
      width: 100%;
      max-width: 100%;
      overflow: hidden;
    }

    footer {
      margin-top: 3rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
      font-size: 0.8rem;
      color: var(--muted);
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      justify-content: space-between;
    }

    a {
      color: var(--accent-soft);
    }

    a:hover {
      text-decoration: underline;
    }

    .meta-pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      margin-top: 0.5rem;
    }

    .meta-pill {
      font-size: 0.75rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(55, 65, 81, 0.85);
      color: var(--muted);
    }

    @media (max-width: 640px) {
      header {
        padding: 1.1rem;
      }

      .chart-card {
        padding: 0.85rem;
      }
    }
  </style>
</head>
<body>
<main>
  <header>
    <div class="eyebrow">
      <span class="eyebrow-dot" aria-hidden="true"></span>
      <span>GW Love Data Week · 2026</span>
    </div>
    <h1>The Loop Clothing Exchange · 2025 Usage & Sustainability Story</h1>
    <p class="subtitle">
      This dashboard visualizes every recorded visit to <strong>The Loop Clothing Exchange</strong> on GW’s Mount Vernon Campus
      from January–October 2025. It shows what items students actually take, when they visit, and how donation behavior
      shapes this sustainability platform.
    </p>
    <div class="highlight-stat-row" aria-label="Summary statistics">
      <div class="stat-card">
        <div class="stat-label">Time Window</div>
        <div class="stat-value">Jan – Oct 2025</div>
        <div class="stat-sub">877 recorded visits</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Community</div>
        <div class="stat-value">Mostly Undergrads</div>
        <div class="stat-sub">Plus grads, staff &amp; neighbors</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Average Rating</div>
        <div class="stat-value">⭐️⭐️⭐️⭐️⭐️</div>
        <div class="stat-sub">Experience ratings skew 5/5</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Built With</div>
        <div class="stat-value">Vega-Lite</div>
        <div class="stat-sub">Open source · GitHub Pages</div>
      </div>
    </div>
  </header>

  <!-- Section 1: What students take -->
  <section aria-labelledby="section-popularity-title">
    <div class="section-header">
      <div>
        <div class="section-kicker">What do people actually take?</div>
        <h2 class="section-title" id="section-popularity-title">
          Clothing categories ranked by total items taken
        </h2>
      </div>
    </div>
    <p class="section-description">
      Each visit can include multiple items across categories. The bar chart below ranks categories by the total number of
      items leaving The Loop. This helps staff understand what students value most and which donations are most impactful.
    </p>
    <div class="chart-card">
      <figure aria-describedby="popularity-caption">
        <div id="chart-popularity" class="chart-container" role="img"
             aria-label="Bar chart ranking clothing categories by the total number of items taken across all visits."></div>
        <figcaption id="popularity-caption">
          Bar chart showing the total number of items taken in each clothing category across 2025 visits.
          Higher bars indicate higher demand, guiding donation campaigns and inventory planning.
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Section 2: Foot traffic over time -->
  <section aria-labelledby="section-time-title">
    <div class="section-header">
      <div>
        <div class="section-kicker">When is The Loop busiest?</div>
        <h2 class="section-title" id="section-time-title">
          Visit patterns across the 2025 academic year
        </h2>
      </div>
    </div>
    <p class="section-description">
      Foot traffic varies across the semester as move-in, weather, and campus events change clothing needs.
      The area chart below shows how many visits were recorded each month, from move-in through midterms and beyond.
    </p>
    <div class="chart-card">
      <figure aria-describedby="time-caption">
        <div id="chart-time" class="chart-container" role="img"
             aria-label="Area chart showing the number of Loop visits per month from January to October 2025."></div>
        <figcaption id="time-caption">
          Area chart showing the number of visits per month. Peaks suggest key moments in the semester when The Loop
          becomes especially important to students, like early-term wardrobe building.
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Section 3: Who uses The Loop and what do they take? -->
  <section aria-labelledby="section-heatmap-title">
    <div class="section-header">
      <div>
        <div class="section-kicker">Community snapshot</div>
        <h2 class="section-title" id="section-heatmap-title">
          Clothing categories by demographic group
        </h2>
      </div>
    </div>
    <p class="section-description">
      The Loop intentionally serves a broad community of undergraduates, graduate students, staff, faculty, and neighbors.
      This heatmap compares item categories by demographic group to reveal any distinctive patterns in how different groups
      use the exchange.
    </p>
    <div class="chart-card">
      <figure aria-describedby="heatmap-caption">
        <div id="chart-heatmap" class="chart-container" role="img"
             aria-label="Heatmap showing the total number of items taken by clothing category and demographic group."></div>
        <figcaption id="heatmap-caption">
          Heatmap showing total items taken by clothing category and demographic group. Darker cells indicate greater
          item flow for that combination, helping identify who benefits most from specific types of clothing.
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Section 4: Donations vs. taking -->
  <section aria-labelledby="section-donations-title">
    <div class="section-header">
      <div>
        <div class="section-kicker">Circularity in action</div>
        <h2 class="section-title" id="section-donations-title">
          Visits over time, split by “brought donations” behavior
        </h2>
      </div>
    </div>
    <p class="section-description">
      Circular fashion only works when community members both contribute and reuse items.
      The stacked bars below track visits over time and show how often visitors reported bringing donations with them
      or using the blue donation bin on the Quad, compared with visits where people came only to take items.
    </p>
    <div class="chart-card">
      <figure aria-describedby="donations-caption">
        <div id="chart-donations" class="chart-container" role="img"
             aria-label="Stacked bar chart showing monthly Loop visits, split by whether visitors brought donations, used the blue bin, or did not donate."></div>
        <figcaption id="donations-caption">
          Stacked bar chart showing the number of visits per month, separated by whether visitors reported bringing donations
          or using the blue donation bin. This illustrates how donation behavior supports the supply of items throughout the year.
        </figcaption>
      </figure>
    </div>
  </section>

  <!-- Conclusion section -->
  <section aria-labelledby="section-conclusion-title">
    <div class="section-header">
      <div>
        <div class="section-kicker">Closing reflections</div>
        <h2 class="section-title" id="section-conclusion-title">
          What this reveals about The Loop
        </h2>
      </div>
    </div>
    <p class="section-description">
      The Loop is more than a free closet: it is a stable, student-powered circulation system
      that redirects hundreds of items away from landfills while meeting real, everyday needs on campus.
      The patterns suggest clear levers (like targeted category donations and donation drives in peak months) to grow its impact even further.
    </p>
  </section>

  <footer>
    <div>
      <div>Created for GW’s 2026 Data Visualization Competition · The Loop Clothing Exchange</div>
      <div class="meta-pill-row">
        <span class="meta-pill">Data: The Loop, Jan–Oct 2025</span>
        <span class="meta-pill">Tools: HTML · Vega-Lite · GitHub Pages</span>
        <span class="meta-pill">License: Open source (OSI-approved)</span>
      </div>
    </div>
    <div>
      <div>AI usage acknowledgement: Visualization structure and code scaffold generated with ChatGPT-5 and reviewed/curated by the author, Deeksha Ravi.</div>
    </div>
  </footer>
</main>

<script>
  // Shared dataset URL (same directory as index.html)
  const dataUrl = "loop-data.csv";

  // ---------- Chart 1: Category popularity (ranked bar) ----------
  const categoryFields = [
    "Tops",
    "Collared Shirts",
    "Sweaters",
    "Pants",
    "Skirts",
    "Shorts",
    "Dresses",
    "Outerwear",
    "Shoes",
    "Accessories"
  ];

  const popularitySpec = {
    $schema: "https://vega.github.io/schema/vega-lite/v5.json",
    description: "Ranked bar chart of total items taken by clothing category.",
    data: { url: dataUrl },
    transform: [
      {
        fold: categoryFields,
        as: ["Category", "Count"]
      },
      {
        aggregate: [
          { op: "sum", field: "Count", as: "TotalItems" }
        ],
        groupby: ["Category"]
      }
    ],
    mark: {
      type: "bar",
      cornerRadiusEnd: 4
    },
    encoding: {
      x: {
        field: "TotalItems",
        type: "quantitative",
        title: "Total items taken",
        axis: { grid: true },
        scale: { zero: true }
      },
      y: {
        field: "Category",
        type: "nominal",
        sort: "-x",
        title: "Clothing category"
      },
      color: {
        field: "Category",
        type: "nominal",
        legend: null,
        scale: { scheme: "tableau10" }
      },
      tooltip: [
        { field: "Category", type: "nominal", title: "Category" },
        { field: "TotalItems", type: "quantitative", title: "Total items" }
      ]
    },
    config: {
      background: "transparent",
      style: { "guide-label": { color: "#e5e7eb" }, "guide-title": { color: "#e5e7eb" } },
      axis: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      },
      legend: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      }
    }
  };

  vegaEmbed("#chart-popularity", popularitySpec, { actions: false });

  // ---------- Chart 2: Visits over time (monthly area chart) ----------
  const timeSpec = {
    $schema: "https://vega.github.io/schema/vega-lite/v5.json",
    description: "Monthly visit counts as area chart.",
    data: { url: dataUrl },
    mark: {
      type: "area",
      line: { color: "#22c55e", strokeWidth: 2 },
      point: { filled: true, size: 40, color: "#22c55e" },
      opacity: 0.4
    },
    encoding: {
      x: {
        field: "Visit Date",
        type: "temporal",
        timeUnit: "yearmonth",
        title: "Month (2025)",
        axis: { format: "%b", labelAngle: 0 }
      },
      y: {
        aggregate: "count",
        type: "quantitative",
        title: "Number of visits",
        axis: { grid: true },
        scale: { zero: true }
      },
      color: {
        value: "#22c55e"
      },
      tooltip: [
        {
          field: "Visit Date",
          type: "temporal",
          timeUnit: "yearmonth",
          title: "Month"
        },
        {
          aggregate: "count",
          type: "quantitative",
          title: "Visits"
        }
      ]
    },
    config: {
      background: "transparent",
      axis: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      }
    }
  };

  vegaEmbed("#chart-time", timeSpec, { actions: false });

  // ---------- Chart 3: Heatmap of category by demographic ----------
  const heatmapSpec = {
    $schema: "https://vega.github.io/schema/vega-lite/v5.json",
    description: "Heatmap of total items taken by category and demographic group.",
    data: { url: dataUrl },
    transform: [
      {
        fold: categoryFields,
        as: ["Category", "Count"]
      },
      {
        aggregate: [
          { op: "sum", field: "Count", as: "TotalItems" }
        ],
        groupby: ["Demographics", "Category"]
      }
    ],
    mark: "rect",
    encoding: {
      x: {
        field: "Category",
        type: "nominal",
        title: "Clothing category",
        sort: categoryFields
      },
      y: {
        field: "Demographics",
        type: "nominal",
        title: "Demographic group"
      },
      color: {
        field: "TotalItems",
        type: "quantitative",
        title: "Items taken",
        scale: { scheme: "viridis" }
      },
      tooltip: [
        { field: "Demographics", type: "nominal", title: "Group" },
        { field: "Category", type: "nominal", title: "Category" },
        { field: "TotalItems", type: "quantitative", title: "Items taken" }
      ]
    },
    config: {
      background: "transparent",
      axis: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      },
      legend: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      }
    }
  };

  vegaEmbed("#chart-heatmap", heatmapSpec, { actions: false });

  // ---------- Chart 4: Donations vs non-donations over time ----------
  const donationsSpec = {
    $schema: "https://vega.github.io/schema/vega-lite/v5.json",
    description: "Stacked bar chart of visits by month and donation behavior.",
    data: { url: dataUrl },
    mark: "bar",
    encoding: {
      x: {
        field: "Visit Date",
        type: "temporal",
        timeUnit: "yearmonth",
        title: "Month (2025)",
        axis: { format: "%b", labelAngle: 0 }
      },
      y: {
        aggregate: "count",
        type: "quantitative",
        title: "Number of visits",
        scale: { zero: true }
      },
      color: {
        field: "Did you bring donations with you today?",
        type: "nominal",
        title: "Brought donations?",
        // High-contrast mapping so behaviors are clearly distinct
        scale: {
          domain: [
            "Yes",
            "Donated at the blue bin on the Quad",
            "No"
          ],
          range: [
            "#22c55e",  // Yes – bright green
            "#f97316",  // Blue bin – vivid orange
            "#38bdf8"   // No – bright blue
          ]
        },
        sort: ["Yes", "Donated at the blue bin on the Quad", "No"]
      },
      tooltip: [
        {
          field: "Visit Date",
          type: "temporal",
          timeUnit: "yearmonth",
          title: "Month"
        },
        {
          field: "Did you bring donations with you today?",
          type: "nominal",
          title: "Brought donations?"
        },
        {
          aggregate: "count",
          type: "quantitative",
          title: "Visits"
        }
      ]
    },
    config: {
      background: "transparent",
      axis: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      },
      legend: {
        labelColor: "#e5e7eb",
        titleColor: "#e5e7eb"
      }
    }
  };

  vegaEmbed("#chart-donations", donationsSpec, { actions: false });
</script>
</body>
</html>
